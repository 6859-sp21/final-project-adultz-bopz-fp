{"version":3,"sources":["Bubbles.js","utils/utilities.js","utils/data-transform.js","utils/d3-config.js","steps/BubbleStep.js","gifs/demo0.gif","gifs/demo1.gif","gifs/demo2.gif","gifs/demo3.gif","steps/StorySteps.js","YearScroller.js","Timeline.js","steps/TutorialStep.js","App.js","About.js","RouterWrapper.js","index.js"],"names":["svg","view","label","node","focus","CUTS_VERSE","COUNT_BY_YEAR","max","min","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","COLORS","d3","domain","identity","sexual","profanity","violence","other","purify","wordInput","genRawData","a","genNestedData","csvData","groupedByArtist","Array","from","d","ogArtist","map","item","groupedByBadword","badword","word","groupedBySong","songName","song","groupedByLyric","ogLyric","uniqueLyricGroup","firstUniqueEntry","kbLyric","compareLyrics","kbLyricHTML","ogLyricHTML","ogLyricHTMLCensored","name","children","category","genTimelineData","groupedByYear","year","groupedByCategory","count","length","leaves","parseInt","genArtists","artistList","artist","value","type","sort","b","localeCompare","ogLyricParsed","split","ogLyricObj","convertArrayToJSON","getFormattedOGLyricAsHTML","kbLyricParsed","getFormattedKBLyricAsHTML","punctuationless","s","replace","toLowerCase","arr","Object","assign","k","ogLyricWordArray","hideProfanity","ogWord","innerContent","includes","join","ogLyricWordObj","kbLyricWordArray","prev","kbWord","i","undefined","prefix","suffix","genAllYearData","width","scale1","scale2","scale3","color","Bubbles","songOrArtist","setSongOrArtist","shouldFocus","useState","root","setRoot","setHideProfanity","showLegend","setShowLegend","d3Container","useRef","updateArtistTitle","shouldUpdate","artistSelected","wordSelected","songSelected","depth","VIEW_ALL_OPTION","data","parent","style","text","shouldShowLabel","r","zoomTo","v","attr","x","y","zoom","event","transition","duration","altKey","tween","t","filter","this","display","on","useEffect","res","size","padding","sum","fetchData","closeLyrics","remove","current","height","append","feMerge","selectAll","descendants","slice","e","target","pageX","pageY","generateLyricPopup","stopPropagation","content","document","addEventListener","handleEscape","removeEventListener","key","innerHTML","child","generateLyricRow","songTitle","releasedYear","categoryText","html","newFocus","className","id","checked","onChange","for","entries","backgroundColor","whiteSpace","ref","customStyles","control","base","border","borderRadius","borderBottom","boxShadow","placeholder","singleValue","indicatorSeparator","dropdownIndicator","input","menu","option","state","fontSize","isSelected","isFocused","BubbleStep","artists","setArtists","artistRes","autoFocus","options","styles","margin","IntroStep","to","Step1","textAlign","Step2a","src","Demo0","Step2b","Demo1","Step2c","Demo2","Step2d","Demo3","YearScroller","start","end","cx","selected","onClick","fill","_","idx","yr","Timeline","setYear","rawData","setRawData","allYearData","setAllYearData","setData","allYearRes","treemap","filtered","filterByYear","initData","fontScale","maxCountForYear","minCountForYear","range","fixProfanity","filterYear","tile","paddingInner","round","createLegend","categoryName","categoryData","reduce","opacity","getLegendTitleInfo","legendTextInfo","fontWeight","leaf","x0","y0","x1","y1","openModal","loadDataIntoPopup","toString","loadPopupRight","allSongs","songData","index","sectionRef","lyricData","subIndex","childContainer","comparedLyrics","compareLyricsInTimeline","closeModal","preventDefault","artistData","songDataFromFirstArtist","loadPopupLeft","popupRef","textBox","getBoundingClientRect","textWidth","textHeight","boxHeight","console","log","href","rel","newYear","TutorialStep","dynamicHeight","showStatus","showThumbs","App","currentStepIndex","setCurrentStepIndex","onStepEnter","flexDirection","About","marginTop","class","title","frameborder","allow","allowfullscreen","RouterWrapper","path","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.8ed57425.chunk.js","sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\nimport * as d3 from \"d3\";\nimport { genNestedData } from \"./utils/data-transform\";\nimport { width, height, pack } from \"./utils/d3-config.js\";\nimport { VIEW_ALL_OPTION } from \"./App\";\nimport \"./Bubbles.css\";\nimport { COLORS, purify } from \"./utils/utilities\";\n\nconst scale1 = d3\n  .scaleSequential(d3.interpolate(\"#00875A\", \"#ABF5D1\"))\n  .domain([0, 30]);\nconst scale2 = d3\n  .scaleSequential(d3.interpolate(\"#00B8D9\", \"#B3F5FF\"))\n  .domain([2, 8]);\nconst scale3 = d3\n  .scaleSequential(d3.interpolate(\"#C054BE\", \"#E1C7E0\"))\n  .domain([0, 8]);\n\n// TODO: Create scale 4\nconst color = [null, scale1, scale2, scale3, scale3];\n\nlet svg, view, label, node, focus;\n\nconst Bubbles = ({ songOrArtist, setSongOrArtist, shouldFocus }) => {\n  const [root, setRoot] = useState(null);\n  const [hideProfanity, setHideProfanity] = useState(true);\n  const [showLegend, setShowLegend] = useState(false);\n\n  const d3Container = useRef(null);\n\n  // don't call setSongOrArtist if title update is due to props change\n  const updateArtistTitle = (d, shouldUpdate) => {\n    let artistSelected;\n    let wordSelected;\n    let songSelected;\n\n    // update legend\n    if (shouldUpdate && d.depth >= 1) {\n      setShowLegend(true);\n    }\n\n    if (d.depth === 0) {\n      // artist level\n      if (shouldUpdate) {\n        setShowLegend(false);\n        setSongOrArtist(VIEW_ALL_OPTION);\n      }\n    } else if (d.depth === 1) {\n      // bad word level\n      if (shouldUpdate) {\n        setSongOrArtist({\n          value: d.data.name,\n          label: d.data.name,\n          type: \"artist\",\n        });\n      }\n      artistSelected = \"Artist: \" + d.data.name;\n      wordSelected = `Words altered in Kidz Bop songs by ${\n        hideProfanity ? purify(d.data.name) : d.data.name\n      }`;\n    } else if (d.depth === 2) {\n      // song level\n      artistSelected = \"Artist: \" + d.parent.data.name;\n      wordSelected = \"Word: \" + (hideProfanity ? purify(d.data.name) : d.data.name);\n      songSelected = `Songs that ${d.parent.data.name} say(s) '${\n        hideProfanity ? purify(d.data.name) : d.data.name\n      }'`;\n    } else if (d.depth === 3) {\n      artistSelected = \"Artist: \" + d.parent.parent.data.name;\n      wordSelected = \"Word: \" + (hideProfanity ? purify(d.parent.data.name) : d.parent.data.name);\n      songSelected = \"Song: \" + d.data.name;\n    }\n\n    d3.select(\"#selectedAllArtist\")\n      .style(\"font-weight\", d.depth === 0 ? 400 : 200)\n      .style(\"border-left\", d.depth === 0 ? \"var(--light-green) solid 2px\" : \"none\")\n      .text(artistSelected ? artistSelected : \"All Artists\");\n\n    d3.select(\"#selectedArtistName\")\n      .style(\"font-weight\", d.depth === 1 ? 400 : 200)\n      .style(\"border-left\", d.depth === 1 ? \"var(--light-green) solid 2px\" : \"none\")\n      .text(wordSelected ? wordSelected : \"Words\");\n\n    d3.select(\"#selectedBadWord\")\n      .style(\"font-weight\", d.depth === 2 ? 400 : 200)\n      .style(\"border-left\", d.depth === 2 ? \"var(--light-green) solid 2px\" : \"none\")\n      .text(songSelected ? songSelected : \"Songs\");\n\n    d3.select(\"#selectedSong\")\n      .style(\"font-weight\", d.depth === 3 ? 400 : 200)\n      .style(\"border-left\", d.depth === 3 ? \"var(--light-green) solid 2px\" : \"none\")\n      .text(\n        d.depth === 3\n          ? `Lyrics in '${d.data.name}' where the word '${\n              hideProfanity ? purify(d.parent.data.name) : d.parent.data.name\n            }' is altered`\n          : \"Lyrics\"\n      );\n  };\n\n  const shouldShowLabel = (d) => {\n    return (d.parent === root && d.r > d.data.name.length * 2) || d.depth > 1;\n  };\n\n  const zoomTo = (v) => {\n    const k = width / v[2];\n    view = v;\n    label.attr(\"transform\", (d) => {\n      return `translate(${(d.x - v[0]) * k},${(d.y - v[1]) * k})`;\n    });\n    node.attr(\n      \"transform\",\n      (d) => `translate(${(d.x - v[0]) * k},${(d.y - v[1]) * k})`\n    );\n    node.attr(\"r\", (d) => d.r * k);\n  };\n\n  const zoom = (event, d) => {\n    focus = d;\n\n    const transition = svg\n      .transition()\n      .duration(event.altKey ? 7500 : 750)\n      .tween(\"zoom\", (d) => {\n        const i = d3.interpolateZoom(view, [focus.x, focus.y, focus.r * 2]);\n        return (t) => zoomTo(i(t));\n      });\n\n    node\n      .filter(function (d) {\n        return d.parent === focus || this.style.display === \"inline\";\n      })\n      .transition(transition)\n      .style(\"fill-opacity\", (d) => (d.parent === focus ? 1 : 0))\n      .on(\"start\", function (d) {\n        if (d.parent === focus) this.style.display = \"inline\";\n      })\n      .on(\"end\", function (d) {\n        if (d.parent !== focus) this.style.display = \"none\";\n      });\n\n    label\n      .filter(function (d) {\n        return d.parent === focus || this.style.display === \"inline\";\n      })\n      .transition(transition)\n      .style(\"fill-opacity\", (d) => (d.parent === focus ? 1 : 0))\n      .on(\"start\", function (d) {\n        if (shouldShowLabel(d)) this.style.display = \"inline\";\n      })\n      .on(\"end\", function (d) {\n        if (d.parent !== focus) this.style.display = \"none\";\n      });\n  };\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const res = await genNestedData();\n      const input = { name: \"artists\", children: res };\n      setRoot(pack(input));\n    };\n    fetchData();\n  }, []);\n\n  useEffect(() => {\n    if (!shouldFocus && focus && focus.depth === 2) {\n      closeLyrics()\n    }\n  }, [shouldFocus]);\n\n  /* The useEffect Hook is for running side effects outside of React,\n       for instance inserting elements into the DOM using D3 */\n  useEffect(() => {\n    d3.selectAll(\"#bubbles > *\").remove();\n\n    if (root && d3Container.current) {\n      focus = root;\n\n      // viz container\n      svg = d3\n        .select(d3Container.current)\n        .attr(\"viewBox\", `-${width / 2} -${height / 2} ${width} ${height}`)\n        .style(\"display\", \"block\")\n        .style(\"height\", \"80vh\")\n        .style(\"margin\", \"0 -14px\")\n        .attr(\"text-anchor\", \"middle\")\n        .style(\"cursor\", \"pointer\")\n        .on(\"click\", (event) => {\n          if (focus !== root) {\n            if (d3.select(\"#lyrics\").style(\"z-index\") > 0) {\n              // Hide lyrics when escape button pushed\n              closeLyrics();\n            } else {\n              updateArtistTitle(focus.parent, true);\n              zoom(event, focus.parent);\n            }\n          }\n        });\n\n      // glow\n      const defs = svg.append(\"defs\");\n      const filter = defs.append(\"filter\").attr(\"id\", \"glow\");\n      filter.append(\"feGaussianBlur\").attr(\"stdDeviation\", \"2\").attr(\"result\", \"coloredBlur\");\n      const feMerge = filter.append(\"feMerge\");\n      feMerge.append(\"feMergeNode\").attr(\"in\", \"coloredBlur\");\n      feMerge.append(\"feMergeNode\").attr(\"in\", \"SourceGraphic\");\n\n      // circle nodes\n      node = svg\n        .append(\"g\")\n        .selectAll(\"circle\")\n        .data(root.descendants().slice(1))\n        .join(\"circle\")\n        .attr(\"stroke\", (d) => {\n          if (d.depth == 2) {\n            return COLORS[d.data.category](7);\n          } else if (d.depth == 3) {\n            return COLORS[d.parent.data.category](d.r);\n          }\n          if (typeof color[d.depth] === \"function\") {\n            return color[d.depth](d.r);\n          }\n        })\n        .attr(\"fill\", \"transparent\")\n        .style(\"display\", (d) => (d.parent === root ? \"inline\" : \"none\"))\n        .on(\"mouseover\", (e, d) => {\n          d3.select(e.target).attr(\"stroke-width\", 4).style(\"filter\", \"url(#glow)\");\n          if (!shouldShowLabel(d)) {\n            d3.select(\"#tooltip\").transition().duration(200).style(\"opacity\", 1).text(d.data.name);\n          }\n        })\n        .on(\"mousemove\", (e) => {\n          d3.select(\"#tooltip\")\n            .style(\"left\", e.pageX + 10 + \"px\")\n            .style(\"top\", e.pageY - 10 + \"px\");\n        })\n        .on(\"mouseout\", (e) => {\n          d3.select(e.target).attr(\"stroke-width\", 1).style(\"filter\", null);\n          d3.select(\"#tooltip\").transition().duration(200).style(\"opacity\", 0);\n        })\n        .on(\"click\", (event, d) => {\n          if (focus !== d) {\n            updateArtistTitle(d, true);\n\n            // Only zoom until you get to song level. Then reveal bad words in each song.\n            if (d.depth < 3) {\n              zoom(event, d);\n            } else if (d.depth === 3) {\n              generateLyricPopup(d.data);\n            }\n            event.stopPropagation();\n          }\n        });\n\n      // labels\n      label = svg\n        .append(\"g\")\n        .attr(\"pointer-events\", \"none\")\n        .attr(\"text-anchor\", \"middle\")\n        .selectAll(\"text\")\n        .data(root.descendants())\n        .join(\"text\")\n          .attr(\"class\", (d) => \"label-text-node-depth-\" + d.depth)\n          .style(\"font\", (d) => (d.depth === 1 ? \"8px Lato\" : \"12px Lato\"))\n          .style(\"fill\", \"white\")\n          .style(\"fill-opacity\", (d) => (d.parent === root ? 1 : 0))\n          .style(\"display\", (d) => (shouldShowLabel(d) ? \"inline\" : \"none\"))\n          .text((d) => {\n            let content = (!d.children ? d.data.songName : d.data.name);\n            let filteredContent = (hideProfanity ? purify(content) : content);\n            return filteredContent;\n          });\n\n      // tooltip\n      d3.select(\"#scrollApp\")\n        .append(\"div\")\n        .attr(\"id\", \"tooltip\")\n        .attr(\"style\", \"position: absolute; opacity: 0;\")\n        .style(\"color\", \"white\")\n        .style(\"background-color\", \"#334e68bb\")\n        .style(\"padding\", \"8px\")\n        .style(\"border-radius\", \"4px\");\n\n      // description text\n      d3.select(\"#selectedAllArtist\")\n        .style(\"font-weight\", \"400\")\n        .style(\"border-left\", \"var(--light-green) solid 2px\");\n\n      // Lyric breakdown\n      d3.select(\"#svg-container\")\n        .append(\"div\")\n        .attr(\"id\", \"lyrics\")\n        .style(\"z-index\", \"-10\")\n        .style(\"position\", \"fixed\")\n        .style(\"opacity\", \"0\")\n        .style(\"pointer-events\", \"none\")\n        .style(\"width\", \"40vw\")\n        .style(\"height\", \"60vh\")\n        .style(\"left\", \"50%\")\n        .style(\"top\", \"50%\")\n        .style(\"overflow\", \"auto\")\n        .style(\"color\", \"var(--light-text)\")\n        .style(\"font\", \"16px Lato\")\n        .style(\"background-color\", \"var(--dark-secondary)\")\n        .style(\"padding\", \"24px\")\n        .style(\"border-radius\", \"12px\")\n        .style(\"transform\", \"translate(-50%, -50%)\");\n\n      d3.select(\"#lyrics\")\n        .append(\"button\")\n        .style(\"position\", \"absolute\")\n        .style(\"right\", \"12px\")\n        .style(\"top\", \"12px\")\n        .text(\"\\u00d7\")\n        .on(\"click\", () => {\n          // Close lyric pop-up\n          closeLyrics();\n        });\n\n      d3.select(\"#lyrics\")\n        .append(\"h2\")\n        .style(\"margin-top\", 0)\n        .style(\"text-align\", \"center\")\n        .attr(\"id\", \"lyrics-title\");\n\n      d3.select(\"#scrollApp\")\n        .append(\"div\")\n        .attr(\"id\", \"lyric-popup-bg\")\n        .style(\"background-color\", \"black\")\n        .style(\"max-height\", \"100vh\")\n        .style(\"max-width\", \"100vw\")\n        .style(\"min-height\", \"100vh\")\n        .style(\"min-width\", \"100vw\")\n        .style(\"position\", \"fixed\")\n        .style(\"top\", \"0px\")\n        .style(\"left\", \"0px\")\n        .style(\"opacity\", \"0\")\n        .style(\"z-index\", \"-11\")\n        .on(\"click\", () => {\n          closeLyrics();\n        });\n\n      d3.select(\"#lyrics\").append(\"p\").style(\"text-align\", \"center\").attr(\"id\", \"lyrics-year\");\n      d3.select(\"#lyrics\").append(\"p\").style(\"text-align\", \"center\").attr(\"id\", \"lyrics-category\");\n\n      d3.select(\"#lyrics\").append(\"div\").attr(\"id\", \"lyrics-content\");\n\n      // esc key zooms out\n      zoomTo([root.x, root.y, root.r * 2]);\n      document.addEventListener(\"keydown\", handleEscape);\n\n      return () => {\n        document.removeEventListener(\"keydown\", handleEscape);\n      };\n    }\n  }, [root]);\n\n  const closeLyrics = () => {\n    d3.select(\"html\").style(\"overflow\", \"auto\").style(\"height\", \"auto\");\n    d3.select(\"#lyric-popup-bg\").style(\"opacity\", \"0\").style(\"z-index\", \"-11\");\n    d3.select(\"#lyrics\")\n      .transition()\n      .duration(200)\n      .style(\"opacity\", 0)\n      .style(\"z-index\", -10)\n      .style(\"pointer-events\", \"none\");\n    updateArtistTitle(focus, false);\n  };\n\n  const handleEscape = (e) => {\n    if (e.key === \"Escape\") {\n      if (d3.select(\"#lyrics\").style(\"z-index\") > 0) {\n        // Hide lyrics when escape button pushed\n        closeLyrics();\n      } else if (focus !== root) {\n        updateArtistTitle(focus.parent, true);\n        zoom(e, focus.parent);\n      }\n    }\n  };\n\n  const generateLyricRow = (data) => {\n    let ogHeader = `<b>${data.ogArtist}</b><br />`;\n    let ogLyricHTML =\n      `<div class=\"Bubbles-ogLyric ${data.category}\">` +\n      (hideProfanity ? data.ogLyricHTMLCensored : data.ogLyricHTML) +\n      \"</div>\";\n\n    let kbHeader = \"<b style='float:right'>Kidz Bop</b><br />\";\n    let kbLyricHTML =\n      `<div class=\"Bubbles-kbLyric\">` + data.kbLyricHTML + \"</div>\";\n\n    return (\n      \"<div style='width:45%'>\" +\n      ogHeader +\n      ogLyricHTML +\n      \"</div>\" +\n      \"<div class='Bubbles-arrow'>\\u2192</div>\" +\n      \"<div style='width:45%'>\" +\n      kbHeader +\n      kbLyricHTML +\n      \"</div>\"\n    );\n  };\n\n  // Function to transform data into HTML content\n  const generateLyricPopup = (data) => {\n    d3.select(\"html\").style(\"overflow\", \"hidden\").style(\"height\", \"100%\");\n    d3.select(\"#lyric-popup-bg\").style(\"z-index\", \"8\").style(\"opacity\", \"0.6\");\n    // Merge all lyrics together\n    const innerHTML = data.children\n      .map((child) => {\n        return '<div class=\"Bubbles-lyricRow\">' + generateLyricRow(child) + \"</div>\";\n      })\n      .join(\"\");\n\n    let { songName, ogArtist, year, category } = data.children[0];\n    const songTitle = songName + \" by \" + ogArtist;\n    const releasedYear = \"Released in \" + year + \".\";\n    const categoryText = \"Category: \" + category;\n\n    // Fill in title of lyric popup\n    d3.select(\"#lyrics-title\")\n      .style(\"font-weight\", \"bold\")\n      .style(\"margin-bottom\", 0)\n      .text(songTitle);\n\n    // Fill in year of lyric popup\n    d3.select(\"#lyrics-year\").style(\"margin-top\", 0).style(\"margin-bottom\", 0).text(releasedYear);\n\n    // Fill in category of word\n    d3.select(\"#lyrics-category\")\n      .style(\"margin-top\", 0)\n      .style(\"margin-bottom\", 0)\n      .style(\"color\", COLORS[category](7))\n      .text(categoryText);\n\n    // Fill in content of lyric popup\n    d3.select(\"#lyrics-content\").html(innerHTML);\n\n    // Reveal lyric popup\n    d3.select(\"#lyrics\")\n      .transition()\n      .duration(200)\n      .style(\"z-index\", 10)\n      .style(\"opacity\", 1)\n      .style(\"pointer-events\", \"all\");\n  };\n\n  useEffect(() => {\n    if (songOrArtist && root) {\n      const newFocus = root\n        .descendants()\n        .filter((d) => d.data.name === songOrArtist.value)[0];\n      if (newFocus) {\n        zoom({}, newFocus);\n        updateArtistTitle(newFocus, false);\n      }\n    }\n  }, [songOrArtist, root, zoom]);\n\n\n  useEffect(() => {\n    d3.selectAll(\".label-text-node-depth-2\")\n      .text((d) => {\n        let content = (!d.children ? d.data.songName : d.data.name);\n        let filteredContent = (hideProfanity ? purify(content) : content);\n        return filteredContent;\n      });\n\n    d3.selectAll(\"circle\").on(\"click\", (event, d) => {\n      if (focus !== d) {\n        updateArtistTitle(d, true);\n\n        // Only zoom until you get to song level. Then reveal bad words in each song.\n        if (d.depth < 3) {\n          zoom(event, d);\n        } else if (d.depth === 3) {\n          generateLyricPopup(d.data);\n        }\n        event.stopPropagation();\n      }\n    });\n  }, [hideProfanity])\n\n  const toggleProfanity = () => {\n    setHideProfanity(!hideProfanity);\n  }\n\n  const createLegend = () => (\n    <div className=\"Bubbles-legend\">\n      {Object.entries(COLORS).map(([category, color], i) => {\n        return (\n          <div className=\"Timeline-legend-item\">\n            <div className=\"circle\" style={{ backgroundColor: color(7) }} />\n            <div style={{ whiteSpace: \"nowrap\" }}>{category}</div>\n          </div>\n        );\n      })}\n    </div>\n  );\n\n  return (\n    <div className=\"Bubbles-container\">\n      <div className=\"Bubbles-checkbox\">\n        <input\n          type=\"checkbox\"\n          id=\"bubbleProfanity\"\n          checked={hideProfanity}\n          onChange={toggleProfanity}\n        ></input>\n        <label for=\"bubbleProfanity\">Hide Profanity</label>\n      </div>\n      {showLegend ? createLegend() : null}\n      <div className=\"Bubbles-content\">\n        <div>\n          <h3 className=\"Bubbles-layer\" id=\"selectedAllArtist\">\n            All Artists\n          </h3>\n          <h3 className=\"Bubbles-layer\" id=\"selectedArtistName\">\n            Words\n          </h3>\n          <h3 className=\"Bubbles-layer\" id=\"selectedBadWord\">\n            Songs\n          </h3>\n          <h3 className=\"Bubbles-layer\" id=\"selectedSong\">\n            Lyrics\n          </h3>\n        </div>\n        <div id=\"svg-container\" style={{ width: \"100%\" }}>\n          <svg className=\"d3-component\" width=\"100%\" height=\"100%\" ref={d3Container} id=\"bubbles\" />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Bubbles;\n","import * as d3 from \"d3\";\nimport profanity from \"profanity-util\";\n\nexport const CUTS_VERSE = \"cuts verse\";\n\nexport const COUNT_BY_YEAR = {\n  \"-1\": {\n    max: 89,\n    min: 1\n  },\n  2001: {\n    max: 1,\n    min: 1,\n  },\n  2002: {\n    max: 4,\n    min: 1,\n  },\n  2003: {\n    max: 3,\n    min: 1,\n  },\n  2004: {\n    max: 3,\n    min: 1,\n  },\n  2005: {\n    max: 2,\n    min: 1,\n  },\n  2006: {\n    max: 6,\n    min: 1,\n  },\n  2007: {\n    max: 8,\n    min: 1,\n  },\n  2008: {\n    max: 8,\n    min: 1,\n  },\n  2009: {\n    max: 9,\n    min: 1,\n  },\n  2010: {\n    max: 8,\n    min: 1,\n  },\n  2011: {\n    max: 5,\n    min: 1,\n  },\n  2012: {\n    max: 9,\n    min: 1,\n  },\n  2013: {\n    max: 11,\n    min: 1,\n  },\n  2014: {\n    max: 6,\n    min: 1,\n  },\n  2015: {\n    max: 13,\n    min: 1,\n  },\n  2016: {\n    max: 10,\n    min: 1,\n  },\n  2017: {\n    max: 11,\n    min: 1,\n  },\n  2018: {\n    max: 15,\n    min: 1,\n  },\n  2019: {\n    max: 32,\n    min: 1,\n  },\n};\n\nexport const COLORS = {\n  \"alcohol & drugs\": d3.scaleSequential(d3.interpolate(\"#88d4af\",  \"#00875A\")).domain([1, 10]),\n  identity: d3.scaleSequential(d3.interpolate(\"#99efff\",  \"#008ba5\")).domain([1, 10]),\n  sexual: d3.scaleSequential(d3.interpolate(\"#ffbbfe\",  \"#C054BE\")).domain([1, 10]),\n  profanity: d3.scaleSequential(d3.interpolate(\"#ffe5b0\",  \"#FFAB00\")).domain([1, 10]),\n  violence: d3.scaleSequential(d3.interpolate(\"#ffbeb0\",  \"#FF5630\")).domain([1, 10]),\n  other: d3.scaleSequential(d3.interpolate(\"#c2cfd8\",  \"#596066\")).domain([1, 10]),\n};\n\n\nexport const purify = (wordInput) => {\n  return profanity.purify(wordInput)[0];\n}","import * as d3 from \"d3\";\nimport { purify } from \"./utilities\";\n\nexport const genRawData = async () => {\n  return await d3.csv(\n    \"https://raw.githubusercontent.com/the-pudding/data/master/kidz-bop/KB_censored-lyrics.csv\"\n  );\n};\n\nexport const genNestedData = async () => {\n  const csvData = await genRawData();\n\n  let groupedByArtist = Array.from(\n      d3.group(csvData, (d) => d.ogArtist)\n    ).map((item) => {\n      let groupedByBadword = Array.from(\n        d3.group(item[1], (d) => d.badword)\n      ).map((word) => {\n        let groupedBySong = Array.from(\n          d3.group(word[1], (d) => d.songName)\n        ).map((song) => {\n          // Remove repeated lyrics\n          let groupedByLyric = Array.from(\n            d3.group(song[1], (d) => d.ogLyric)\n          ).map((uniqueLyricGroup) => {\n            // uniqueLyricGroup = is a size-2 array with lyric and index 0 and array of data points at index 1\n            let dataEntries = uniqueLyricGroup[1];\n            let firstUniqueEntry = dataEntries[0];\n            const { ogLyric, kbLyric, badword } = firstUniqueEntry;\n\n            let { kbLyricHTML, ogLyricHTML, ogLyricHTMLCensored } = compareLyrics(\n              badword,\n              ogLyric,\n              kbLyric\n            );\n            return {\n              ...firstUniqueEntry,\n              kbLyricHTML: kbLyricHTML,\n              ogLyricHTML: ogLyricHTML,\n              ogLyricHTMLCensored: ogLyricHTMLCensored\n            };\n          });\n          return { name: song[0], children: groupedByLyric };\n        });\n        return { name: word[0], category: word[1][0].category, children: groupedBySong };\n      });\n      return { name: item[0], children: groupedByBadword };\n    });\n  return groupedByArtist;\n};\n\nexport const genTimelineData = async () => {\n  const csvData = await genRawData();\n\n  let groupedByYear = Array.from(d3.group(csvData, (d) => d.year)).map(\n    (year) => {\n      let groupedByCategory = Array.from(\n        d3.group(year[1], (d) => d.category)\n      ).map((category) => {\n        let groupedByBadword = Array.from(\n          d3.group(category[1], (d) => d.badword)\n        ).map((badword) => {\n          return { name: badword[0], count: badword[1].length, leaves: badword[1], category: category[0]  };\n        });\n\n        return { name: category[0], children: groupedByBadword };\n      });\n      return {\n        name: \"allCategories\",\n        year: parseInt(year[0]),\n        children: groupedByCategory,\n      };\n    }\n  );\n  return { name: \"allYears\", children: groupedByYear };\n};\n\nexport const genArtists = async () => {\n  const csvData = await genRawData();\n  const artistList = Array.from(d3.group(csvData, (d) => d.ogArtist))\n    .map((artist) => {\n      return { label: artist[0], value: artist[0], type: \"artist\" };\n    })\n    .sort((a, b) => a.label.localeCompare(b.label));\n  return artistList;\n};\n\nexport const genSongs = async () => {\n  const csvData = await genRawData();\n  const songList = Array.from(d3.group(csvData, (d) => d.songName))\n    .map((song) => {\n      return { label: song[0], value: song[0], type: \"song\" };\n    })\n    .sort((a, b) => a.label.localeCompare(b.label));\n  return songList;\n};\n\nconst compareLyrics = (badword, ogLyric, kbLyric) => {\n  let ogLyricParsed = ogLyric.split(\" \");\n  let ogLyricObj = convertArrayToJSON(ogLyricParsed);\n  let ogLyricHTML = getFormattedOGLyricAsHTML(ogLyricParsed, badword, false);\n  let ogLyricHTMLCensored = getFormattedOGLyricAsHTML(ogLyricParsed, badword, true);\n\n  let kbLyricParsed = kbLyric.split(\" \");\n  let kbLyricHTML =\n    kbLyric === \"cuts verse\"\n      ? \"<i>cuts verse</i>\"\n      : getFormattedKBLyricAsHTML(ogLyricObj, kbLyricParsed);\n\n  return {\n    kbLyricHTML: \"<span>\" + kbLyricHTML + \"</span>\",\n    ogLyricHTML: \"<span>\" + ogLyricHTML + \"</span>\",\n    ogLyricHTMLCensored: \"<span>\" + ogLyricHTMLCensored + \"</span>\"\n  };\n};\n\nconst punctuationless = (s) => s.replace(/[^A-Za-z0-9]/g, \"\").toLowerCase();\n\nconst convertArrayToJSON = (arr) =>\n  Object.assign(...arr.map((k) => ({ [punctuationless(k)]: 0 })));\n\nconst getFormattedOGLyricAsHTML = (ogLyricWordArray, badword, hideProfanity) => {\n  return ogLyricWordArray\n    .map((ogWord) => {\n      let innerContent = (hideProfanity) ? purify(ogWord) : ogWord;\n      return (\n        \"<span class='ogLyric-\" +\n        (ogWord.toLowerCase().includes(badword) ? \"bad\" : \"good\") +\n        \"'>\" +\n        innerContent +\n        \"</span>\"\n      );\n    })\n    .join(\" \");\n};\n\nconst getFormattedKBLyricAsHTML = (ogLyricWordObj, kbLyricWordArray) => {\n  let prev = true; // true if same, false if altered\n  return kbLyricWordArray\n    .map((kbWord, i) => {\n      // Check if KB Word exists in OG Lyric\n      let kbWordInOGLyric =\n        ogLyricWordObj[punctuationless(kbWord)] !== undefined;\n\n      if (kbWordInOGLyric) {\n        // Word is in both OG and KB Lyric\n        // if prev word was a altered lyric, close the span\n        let prefix = !prev\n          ? \"</span><span class='kblyric-same start'>\"\n          : \"<span class='kblyric-same'>\";\n        prev = true;\n        return prefix + kbWord + \"</span> \";\n      } else {\n        // kbWord is not in og lyric\n        // CHANGE\n        // if it is the last word in the word array, close the span if the previous word is a altered word\n        let suffix =\n          !prev && kbLyricWordArray.length - 1 === i ? \"</span>\" : \"\";\n        // if the previous word is a different word, don't start the span\n        let prefix = prev ? \"<span class='kblyric-different'>\" : \"\";\n        prev = false;\n        return prefix + kbWord + suffix;\n      }\n    })\n    .join(\" \");\n};\n\n\nexport const compareLyricsInTimeline = (lyricData) => {\n  let { badword, ogLyric, kbLyric } = lyricData;\n  return compareLyrics(badword, ogLyric, kbLyric);\n}\n\nexport const genAllYearData = async () => {\n  const csvData = await genRawData();\n  \n  let groupedByCategory = Array.from(\n      d3.group(csvData, (d) => d.category)\n    ).map((category) => {\n      let groupedByBadword = Array.from(\n        d3.group(category[1], (d) => d.badword)\n      ).map((badword) => {\n        return { name: badword[0], count: badword[1].length, leaves: badword[1], category: category[0]  };\n      });\n\n      return { name: category[0], children: groupedByBadword };\n    });\n\n  return {\n    name: \"allYears\",\n    children: groupedByCategory,\n  };\n}","import * as d3 from \"d3\";\n\n// svg colors + dims\nexport const width = 500;\nexport const height = 500;\nexport const pack = (data) =>\n  d3.pack().size([width, height]).padding(3)(\n    d3\n      .hierarchy(data)\n      .sum((d) => d.count)\n      .sort((a, b) => b.count - a.count)\n  );\n","import React, { useState, useEffect } from 'react';\nimport Select from \"react-select\";\nimport { genArtists } from \"../utils/data-transform\";\nimport Bubbles from '../Bubbles.js';\nimport \"../App.css\";\nimport \"./BubbleStep.css\"\n\nconst customStyles = {\n  control: (base) => ({\n    ...base,\n    backgroundColor: \"var(--dark)\",\n    color: \"var(--light-text)\",\n    border: \"none\",\n    borderRadius: \"0\",\n    borderBottom: \"2px solid var(--light-green)\",\n    boxShadow: \"none\",\n    \"&:hover\": {\n      borderBottom: \"2px solid var(--blue)\",\n    },\n  }),\n  placeholder: (base) => ({\n    ...base,\n    backgroundColor: \"var(--dark)\",\n    color: \"var(--dark-text)\",\n  }),\n  singleValue: (base) => ({\n    ...base,\n    color: \"var(--light-text)\",\n  }),\n  indicatorSeparator: () => ({\n    display: \"none\",\n  }),\n  dropdownIndicator: (base) => ({\n    ...base,\n    color: \"var(--light-green)\",\n    \"&:hover\": {\n      color: \"var(--blue)\",\n    },\n  }),\n  input: (base) => ({\n    ...base,\n    color: \"var(--light-text)\",\n  }),\n  menu: (base) => ({\n    ...base,\n    backgroundColor: \"var(--dark)\",\n    color: \"var(--light-text)\",\n  }),\n  option: (base, state) => ({\n    ...base,\n    fontSize: \"16px\",\n    color: \"var(--light-text)\",\n    backgroundColor: state.isSelected\n      ? \"var(--blue)\"\n      : state.isFocused\n      ? \"var(--dark-green)\"\n      : \"var(--dark)\",\n  }),\n};\n\n\nconst BubbleStep = ({shouldFocus}) => {\n\n  const [songOrArtist, setSongOrArtist] = useState(null);\n  const [artists, setArtists] = useState([]);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const artistRes = await genArtists();\n      setArtists(artistRes);\n    };\n    fetchData();\n  }, []);\n\n  return (\n    <div className=\"Bubbles-all\">\n      <div className=\"App-escape\">press ESC to zoom out</div>\n      <div className=\"App-header\">\n        What's\n        <Select\n          className=\"App-select\"\n          autoFocus={shouldFocus}\n          placeholder=\"your favorite artist\"\n          options={[...artists]}\n          value={songOrArtist}\n          onChange={setSongOrArtist}\n          styles={customStyles}\n        />\n        spitting?\n      </div>\n      <div className=\"App-header\" style={{margin: 0}}>\n        <Bubbles shouldFocus={shouldFocus} songOrArtist={songOrArtist} setSongOrArtist={setSongOrArtist} />\n      </div>\n      <div className=\"App-data\">data from The Pudding (https://github.com/the-pudding/data/tree/master/kidz-bop)</div>\n    </div>\n  );\n\n}\n\nexport default BubbleStep","export default __webpack_public_path__ + \"static/media/demo0.b37bdfc9.gif\";","export default __webpack_public_path__ + \"static/media/demo1.cf4fdfdd.gif\";","export default __webpack_public_path__ + \"static/media/demo2.c3f91497.gif\";","export default __webpack_public_path__ + \"static/media/demo3.d3482ee8.gif\";","import \"./StorySteps.css\";\nimport Demo0 from \"../gifs/demo0.gif\";\nimport Demo1 from \"../gifs/demo1.gif\";\nimport Demo2 from \"../gifs/demo2.gif\";\nimport Demo3 from \"../gifs/demo3.gif\";\nimport { Link } from \"react-router-dom\";\n\nexport const IntroStep = () => (\n  <div className=\"IntroStep\">\n    <div className=\"header\">Adultz Bopz</div>\n    <div className=\"desc\">\n      An interactive data visualization tool to understand how Kidz Bop alters\n      or censors pop music for kids. Keep scrolling to make some new\n      discoveries!\n    </div>\n    <div className=\"notice\">\n      Note: The following visualizations include curse words and are censored by\n      default, but you can explore the content and language.\n    </div>\n    <Link className=\"launch-button\" to=\"/\">\n      View our project page here.\n    </Link>\n  </div>\n);\n\nexport const Step1 = () => (\n  <div style={{ margin: \"15vw\", textAlign: \"left\" }}>\n    <h2 className=\"header\">\n      Curious to see how you're favorite artists song's have been altered?\n    </h2>\n    <h3>Explore the following bubble visualization to find out!</h3>\n  </div>\n);\n\nexport const Step2 = () => (\n  <div style={{ margin: \"0 15vw\", textAlign: \"left\" }}>\n    <h2 className=\"header\">How It Works</h2>\n    <p className=\"Step2-p\">\n      All the songs by a certain artist are grouped together in a bubble with a\n      label of their name. For smaller artists, you can hover over their bubble\n      to see which artist it is.\n    </p>\n    <p className=\"Step2-p\">\n      Clicking on an artists bubble takes you inside to show all the songs by a\n      certain artist grouped by their altered or censored word.\n    </p>\n    <p className=\"Step2-p\">\n      Clicking on an word bubble all the songs from that artist with the bad\n      word you clicked.\n    </p>\n    <p className=\"Step2-p\">\n      You can click on each song to reveal the original and Kids Bop lyrics.\n    </p>\n  </div>\n);\n\nexport const Step2a = () => (\n  <div className=\"Step2\">\n    <h2 className=\"Step2-p\">\n      All the songs by a certain artist are grouped together in a bubble with a\n      label of their name. For smaller artists, you can hover over their bubble\n      to see which artist it is.\n    </h2>\n    <img className=\"center-image\" src={Demo0} />\n  </div>\n);\n\nexport const Step2b = () => (\n  <div className=\"Step2\">\n    <h2 className=\"Step2-p\">\n      Clicking on an artists bubble takes you inside to show all the songs by a\n      certain artist grouped by their altered or censored word.\n    </h2>\n    <img className=\"center-image\" src={Demo1} />\n  </div>\n);\n\nexport const Step2c = () => (\n  <div className=\"Step2\">\n    <h2 className=\"Step2-p\">\n      Clicking on an word bubble shows all the songs from that artist with the\n      censored word you clicked.\n    </h2>\n    <img className=\"center-image\" src={Demo2} />\n  </div>\n);\n\nexport const Step2d = () => (\n  <div className=\"Step2\">\n    <h2 className=\"Step2-p\">\n      You can click on each song to reveal the original and Kids Bop lyrics.\n    </h2>\n    <img className=\"center-image\" src={Demo3} />\n  </div>\n);\n","import React from \"react\";\nimport cx from \"classnames\";\nimport \"./YearScroller.css\";\n\nexport const MIN_YEAR = 2001;\nexport const MAX_YEAR = 2019;\nexport const ALL_YEARS = -1;\n\nconst YearScroller = ({ year, onChange }) => {\n  const range = (start, end) => {\n    return Array(end - start + 1)\n      .fill()\n      .map((_, idx) => start + idx);\n  };\n  return (\n    <div className=\"year-scroller\">\n      <div\n        id=\"yearscroller-id-all\"\n        className={cx(\"single-year\", { selected: year === ALL_YEARS })}\n        onClick={() => onChange(ALL_YEARS)}\n      >\n        All years\n      </div>\n      {range(MIN_YEAR, MAX_YEAR).map((yr, idx) => {\n        return (\n          <div\n            id={\"yearscroller-id-\" + idx}\n            className={cx(\"single-year\", { selected: year === yr })}\n            onClick={() => onChange(yr)}\n          >\n            {yr}\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default YearScroller;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { genAllYearData, genTimelineData, compareLyricsInTimeline } from \"./utils/data-transform\";\nimport * as d3 from \"d3\";\nimport \"./Timeline.css\";\nimport YearScroller from \"./YearScroller\";\nimport { CUTS_VERSE, COUNT_BY_YEAR, COLORS, purify } from \"./utils/utilities\";\n\nconst Timeline = () => {\n  const [year, setYear] = useState(2019);\n  const [rawData, setRawData] = useState(null);\n  const [allYearData, setAllYearData] = useState(null);\n  const [data, setData] = useState(null);\n  const [hideProfanity, setHideProfanity] = useState(true);\n\n  const d3Container = useRef(null);\n  const width = 800;\n  const height = 500;\n\n  useEffect(() => {\n    const initData = async () => {\n      const res = await genTimelineData();\n      setRawData(res);\n\n      const allYearRes = await genAllYearData();\n      setAllYearData(treemap(allYearRes).data);\n\n      const filtered = filterByYear(year, res);\n      setData(treemap(filtered));\n    };\n    initData();\n  }, []);\n\n  useEffect(() => {\n    if (rawData !== null) {\n      const filtered = filterByYear(year, rawData);\n      setData(treemap(filtered));\n    }\n  }, [year, rawData]);\n\n  const fontScale = (count) => {\n    let maxCountForYear = COUNT_BY_YEAR[year].max;\n    let minCountForYear = COUNT_BY_YEAR[year].min;\n\n    return d3\n      .scaleLinear()\n      .domain([minCountForYear, maxCountForYear])\n      .range([12, 28])(count);\n  };\n\n  const fixProfanity = (text) => {\n    return hideProfanity ? purify(text) : text;\n  };\n\n  const filterByYear = (filterYear, rawData) => {\n    if( filterYear === -1 ){\n      return allYearData;\n    } else {\n      return rawData.children.filter(({ year }) => filterYear === -1 ? true: year === filterYear)[0];\n    }\n  };\n\n  const treemap = (data) =>\n    d3\n      .treemap()\n      .tile(d3.treemapSquarify)\n      .size([width, height])\n      .paddingInner(3)\n      .round(true)(\n      d3\n        .hierarchy(data)\n        .sum((d) => d.count)\n        .sort((a, b) => b.data.count - a.data.count)\n    );\n\n  const createLegend = () => {\n    const getLegendTitleInfo = (categoryName) => {\n      let categoryData = data.children.filter(\n        (item) => item.data.name === categoryName\n      )[0];\n      let count = categoryData\n        ? categoryData.children.reduce((sum, item) => sum + item.data.count, 0)\n        : 0;\n      let titleText = categoryName;\n      let titleOpacity = categoryData ? 1 : 0.6;\n\n      return {\n        text: titleText,\n        opacity: titleOpacity,\n        count: count,\n        category: categoryName,\n      };\n    };\n\n    if (data) {\n      return (\n        <div className=\"Timeline-legend\">\n          {Object.entries(COLORS)\n            .map(([category, color], i) => {\n              return getLegendTitleInfo(category);\n            }) // returns a tuple with text at index 0, and opacity at index 1\n            .sort((a, b) => {\n              return b.count - a.count;\n            })\n            .map((legendTextInfo) => {\n              return (\n                <div className=\"Timeline-legend-item\">\n                  <div\n                    className=\"circle\"\n                    style={{\n                      backgroundColor: COLORS[legendTextInfo.category](10),\n                    }}\n                  />\n                  <div\n                    style={{\n                      opacity: legendTextInfo.opacity || 1,\n                      whiteSpace: \"nowrap\",\n                    }}\n                  >\n                    {legendTextInfo.text || legendTextInfo.category}\n                    <span style={{ fontWeight: \"200\" }}>\n                      {\" \"}\n                      ({legendTextInfo.count})\n                    </span>\n                  </div>\n                </div>\n              );\n            })}\n        </div>\n      );\n    }\n  };\n\n  useEffect(() => {\n    d3.selectAll(\"#timeline > *\").remove();\n    d3.selectAll(\"#legend > *\").remove();\n\n    const root = data;\n\n    if (root) {\n      createLegend();\n\n      // tooltip\n      d3.select(\"#scrollApp\")\n        .append(\"div\")\n        .attr(\"id\", \"tooltip\")\n        .attr(\"style\", \"position: absolute; opacity: 0;\")\n        .style(\"color\", \"white\")\n        .style(\"background-color\", \"#334e68bb\")\n        .style(\"padding\", \"8px\")\n        .style(\"border-radius\", \"4px\");\n\n      // treemap\n      const svg = d3\n        .select(d3Container.current)\n        .attr(\"viewBox\", [0, 0, width, height])\n        .style(\"font\", \"10px sans-serif\");\n\n      const leaf = svg\n        .selectAll(\"g\")\n        .data(root.leaves())\n        .join(\"g\")\n        .attr(\"transform\", (d) => `translate(${d.x0},${d.y0})`);\n\n      leaf\n        .append(\"rect\")\n        .attr(\"class\", \"timeline-rect\")\n        .attr(\"fill\", (d) => COLORS[d.parent.data.name](10))\n        .attr(\"width\", (d) => d.x1 - d.x0)\n        .attr(\"height\", (d) => d.y1 - d.y0)\n        .on(\"mouseover\", (e, d) => {\n          d3.select(e.target)\n            .attr(\"stroke-width\", 3)\n            .attr(\"stroke\", \"var(--light-text)\");\n          d3.select(\"#tooltip\")\n            .transition()\n            .duration(200)\n            .style(\"opacity\", 1)\n            .text(\n              `'${fixProfanity(d.data.name)}' was altered in ${\n                d.data.count\n              } Kids Bop lyrics`\n            );\n        })\n        .on(\"mousemove\", (e) => {\n          d3.select(\"#tooltip\")\n            .style(\"left\", e.pageX + 10 + \"px\")\n            .style(\"top\", e.pageY - 10 + \"px\");\n        })\n        .on(\"mouseout\", (e) => {\n          d3.select(e.target).attr(\"stroke-width\", 0).style(\"filter\", null);\n          d3.select(\"#tooltip\").transition().duration(200).style(\"opacity\", 0);\n        })\n        .on(\"click\", (_, d) => {\n          openModal();\n          loadDataIntoPopup(d);\n        });\n\n      d3.select(\"#root\").append(\"div\").attr(\"id\", \"Test\");\n      leaf\n        .append(\"text\")\n        .text((d) => (shouldShowLabel(d) ? fixProfanity(d.data.name) : \"\"))\n        .attr(\n          \"id\",\n          (d) => \"word-label-\" + d.data.name + \"-\" + d.data.count + \"-\" + year\n        )\n        .attr(\"fill\", (_) => \"var(--light-text)\")\n        .attr(\"x\", 3)\n        .attr(\"y\", \"1em\")\n        .style(\"font-family\", \"Lato\")\n        .style(\n          \"font-size\",\n          (d) => fontScale(d.data.count).toString() + \"pt\" || \"1em\"\n        );\n      d3.select(\"#Test\").node().remove();\n\n      // Create Popup Background\n      d3.select(\"#scrollApp\")\n        .append(\"div\")\n        .attr(\"id\", \"timeline-popup-bg\")\n        .style(\"z-index\", \"-10\")\n        .style(\"position\", \"fixed\")\n        .style(\"opacity\", \"0\")\n        .style(\"max-height\", \"100vh\")\n        .style(\"max-width\", \"100vw\")\n        .style(\"min-height\", \"100vh\")\n        .style(\"min-width\", \"100vw\")\n        .style(\"background-color\", \"rgb(0,0,0,.8)\")\n        .style(\"left\", 0)\n        .style(\"top\", 0);\n\n      const loadPopupLeft = (leaves, category) => {\n        // 1. Clear any existing artist HTML nodes\n        d3.selectAll(\".timeline-popup-left-item\").remove();\n        d3.selectAll(\".timeline-popup-subtitle\").remove();\n        d3.selectAll(\".timeline-popup-right > *\").remove();\n\n        // 2 Add header\n        d3.select(\".timeline-popup-left\")\n          .append(\"h4\")\n          .attr(\"class\", \"timeline-popup-subtitle\")\n          .text(\"Artists\");\n\n        d3.select(\".timeline-popup-right\")\n          .append(\"h4\")\n          .attr(\"class\", \"timeline-popup-subtitle\")\n          .text(\"Songs\");\n\n        // 3. Get unique artists\n        let artists = Array.from(\n          d3.group(leaves, (leaf) => leaf.ogArtist)\n        ).sort((a, b) => {\n          return b[1].length - a[1].length;\n        });\n\n        // 4. Map artist names to HTML elements\n        artists.map((artistData, index) => {\n          d3.select(\".timeline-popup-left\")\n            .append(\"div\")\n            .attr(\"class\", \"timeline-popup-left-item\")\n            .attr(\"id\", \"timeline-popup-left-\" + index)\n            .text(artistData[0] + \" (\" + artistData[1].length + \")\")\n            .style(\"background-color\", COLORS[category](artistData[1].length))\n            .style(\"border\", () => {\n              // let backgroundBorderColor = \"4px solid \" + COLORS[category](artistData[1].length);\n              return index === 0 ? \"4px solid var(--light-text)\" : \"none\";\n            })\n            .on(\"click\", (e) => {\n              e.preventDefault();\n              d3.selectAll(\".timeline-popup-right-song-title\").remove();\n              d3.selectAll(\".timeline-popup-right-lyric-section\").remove();\n              d3.selectAll(\".timeline-popup-left-item\")\n                .style(\"border\", \"none\")\n                .style(\"color\", \"var(--dark)\");\n              d3.select(e.target).style(\n                \"border\",\n                \"4px solid var(--light-text)\"\n              );\n              loadPopupRight(artistData[1], category);\n            })\n            .on(\"mouseover\", (e) => {\n              d3.select(e.target).style(\n                \"background-color\",\n                \"var(--light-text)\"\n              );\n            })\n            .on(\"mouseout\", (e) => {\n              d3.select(e.target).style(\n                \"background-color\",\n                COLORS[category](artistData[1].length)\n              );\n            });\n        });\n\n        // 4. Load initial song data into right side\n        let firstArtistData = artists[0];\n        let songDataFromFirstArtist = firstArtistData[1];\n        loadPopupRight(songDataFromFirstArtist, category);\n      };\n\n      const loadPopupRight = (allSongs, category) => {\n        // 1. Clear any existing artist HTML nodes\n        d3.selectAll(\".timeline-popup-right-song-section\").remove();\n\n        // 2. Group by song name\n        let uniqueSongs = Array.from(\n          d3.group(allSongs, (d) => d.songName)\n        ).sort((a, b) => a[0] < b[0]);\n\n        // 3. Map songs to HTML elements\n        uniqueSongs.map((songData, index) => {\n          let songTitle = songData[0];\n\n          // Create song section container\n          let sectionRef = d3\n            .select(\".timeline-popup-right\")\n            .append(\"div\")\n            .attr(\"class\", \"timeline-popup-right-song-section\")\n            .attr(\"id\", \"timeline-popup-right-song-section-\" + index);\n\n          // Add song title to each section\n          sectionRef\n            .append(\"div\")\n            .attr(\"class\", \"timeline-popup-right-song-title\")\n            .style(\"background-color\", COLORS[category](10))\n            .attr(\"id\", \"timeline-popup-right-song-title-\" + index)\n            .text(songTitle);\n\n          // Create lyric section\n          sectionRef\n            .append(\"div\")\n            .attr(\"class\", \"timeline-popup-right-lyric-section\")\n            .attr(\"id\", \"timeline-popup-right-lyric-section-\" + index);\n\n          // Add lyric items to lyric section\n          let ref = d3.select(\"#timeline-popup-right-lyric-section-\" + index);\n          songData[1].map((lyricData, subIndex) => {\n            let childContainer = ref\n              .append(\"div\")\n              .attr(\"class\", \"timeline-popup-right-lyric-item\")\n              .attr(\n                \"id\",\n                \"timeline-popup-right-lyric-item-\" + index + \"-\" + subIndex\n              );\n\n            let kbLyric =\n              lyricData.kbLyric === CUTS_VERSE\n                ? CUTS_VERSE\n                : \"Kidz Bop Lyric: \" + lyricData.kbLyric;\n\n            let comparedLyrics = compareLyricsInTimeline(lyricData);\n            childContainer\n              .append(\"div\")\n              .style(\"width\", \"45%\")\n              .append(\"i\")\n              .text(lyricData.ogArtist)\n              .append(\"div\")\n              .attr(\"class\", `Bubbles-ogLyric ${lyricData.category}`)\n              .style(\"font-style\", \"normal\")\n              .html(\n                hideProfanity\n                  ? comparedLyrics.ogLyricHTMLCensored\n                  : comparedLyrics.ogLyricHTML\n              );\n\n            childContainer\n              .append(\"b\")\n              .attr(\"class\", \"Bubbles-arrow\")\n              .style(\"padding-top\", \"4px\")\n              .text(\"\\u2192\");\n\n            childContainer\n              .append(\"div\")\n              .style(\"display\", \"flex\")\n              .style(\"width\", \"45%\")\n              .append(\"i\")\n              .style(\"text-align\", \"right\")\n              .style(\"width\", \"100%\")\n              .text(\"Kidz Bop\")\n              .append(\"div\")\n              .attr(\"class\", `Bubbles-kbLyric ${lyricData.category}`)\n              .style(\"font-style\", kbLyric === CUTS_VERSE ? \"italic\" : \"normal\")\n              .style(\"opacity\", kbLyric === CUTS_VERSE ? \"0.75\" : \"1\")\n              .html(comparedLyrics.kbLyricHTML);\n          });\n        });\n      };\n\n      const openModal = () => {\n        // 1. Lock Scroll\n        d3.select(\"html\").style(\"overflow\", \"hidden\").style(\"height\", \"100%\");\n\n        // 2. Bring Background to z-index 10\n        d3.select(\"#timeline-popup-bg\")\n          .on(\"click\", () => closeModal())\n          .transition()\n          .duration(200)\n          .style(\"opacity\", 0.6)\n          .style(\"z-index\", \"10\");\n\n        // Create Popup modal\n        d3.select(\"#scrollApp\")\n          .append(\"div\")\n          .attr(\"id\", \"timeline-popup-content\")\n          .attr(\"class\", \"timeline-popup-box\")\n          .style(\"z-index\", \"-10\")\n          .style(\"position\", \"fixed\")\n          .style(\"left\", \"10vw\")\n          .style(\"top\", \"10vh\")\n          .style(\"height\", \"calc(80vh - 64px)\")\n          .style(\"width\", \"calc(80vw - 64px)\")\n          .style(\"opacity\", \"0\");\n\n        // Create Popup close button\n        d3.select(\"#timeline-popup-content\")\n          .append(\"div\")\n          .attr(\"id\", \"timeline-popup-button\")\n          .attr(\"class\", \"timeline-popup-button\")\n          .style(\"position\", \"absolute\")\n          .style(\"right\", \"12px\")\n          .style(\"top\", \"4px\")\n          .style(\"text-align\", \"center\")\n          .style(\"border-radius\", \"50%\")\n          .text(\"\\u00d7\")\n          .on(\"click\", (e) => {\n            e.preventDefault();\n            closeModal();\n          });\n\n        // 3. Bring Background to z-index 11\n        d3.select(\"#timeline-popup-content\")\n          .transition()\n          .duration(200)\n          .style(\"opacity\", 1)\n          .style(\"z-index\", \"11\")\n          .style(\"background-color\", \"var(--dark-secondary)\")\n          .style(\"color\", \"var(--light-text)\");\n\n        // Create Popup title\n        d3.select(\"#timeline-popup-content\")\n          .append(\"div\")\n          .attr(\"class\", \"timeline-popup-header\")\n          .style(\"padding-top\", \"12px\")\n          .style(\"border-radius\", \"12px\");\n\n        d3.select(\".timeline-popup-header\")\n          .append(\"h2\")\n          .attr(\"id\", \"timeline-popup-title\")\n          .attr(\"class\", \"timeline-popup-title\");\n\n        d3.select(\".timeline-popup-header\")\n          .append(\"h3\")\n          .attr(\"id\", \"timeline-popup-category\")\n          .attr(\"class\", \"timeline-popup-category\");\n\n        // Create Popup body\n        d3.select(\"#timeline-popup-content\")\n          .append(\"div\")\n          .attr(\"id\", \"timeline-popup-body\")\n          .attr(\"class\", \"timeline-popup-flex\")\n          .style(\"color\", \"black\");\n\n        // Create Popup left container\n        d3.select(\"#timeline-popup-body\")\n          .append(\"div\")\n          .attr(\"class\", \"timeline-popup-left\");\n\n        // Create Popup right container\n        d3.select(\"#timeline-popup-body\")\n          .append(\"div\")\n          .attr(\"class\", \"timeline-popup-right\");\n      };\n\n      const closeModal = () => {\n        // 1. Remove Scroll Lock\n        d3.select(\"html\").style(\"overflow\", \"auto\").style(\"height\", \"auto\");\n\n        // 2. Send Background screen to back\n        d3.select(\"#timeline-popup-bg\")\n          .transition()\n          .duration(200)\n          .style(\"opacity\", \"0\")\n          .style(\"z-index\", -10);\n\n        // 3. Send popup to back\n        d3.select(\"#timeline-popup-content\")\n          .transition()\n          .duration(200)\n          .style(\"opacity\", \"0\")\n          .style(\"z-index\", -10);\n\n        d3.select(\".timeline-popup-left\").remove();\n        d3.select(\".timeline-popup-right\").remove();\n        d3.select(\".timeline-popup-title\").remove();\n        d3.select(\".timeline-popup-category\").remove();\n      };\n\n      const loadDataIntoPopup = (d) => {\n        d3.select(\".timeline-popup-header\");\n\n        //1. Load popup title\n        d3.select(\"#timeline-popup-title\").text(\n          \"Altered lyrics with '\" +\n            (hideProfanity ? purify(d.data.name) : d.data.name) +\n            \"' from \" +\n            year\n        );\n\n        d3.select(\"#timeline-popup-category\")\n          .text(\"Category: \" + d.data.category)\n          .style(\"color\", COLORS[d.data.category](7));\n\n        //2. Load Artists name on left menu\n        loadPopupLeft(d.data.leaves, d.data.category);\n      };\n\n      const handleEscape = (e) => {\n        let popupRef = d3.select(\"#timeline-popup-content\");\n        if (e.key === \"Escape\" && popupRef.node() !== null) {\n          const isModalOpen = popupRef.style(\"z-index\") >= 0;\n          isModalOpen && closeModal();\n        }\n      };\n      document.addEventListener(\"keydown\", handleEscape);\n\n      return svg.node();\n    }\n  }, [data, hideProfanity]);\n\n  useEffect(() => {\n    d3.select(\"#root\").append(\"div\").attr(\"id\", \"Test\");\n\n    d3.selectAll(\"*[id^='word-label']\").text((d) =>\n      shouldShowLabel(d) ? fixProfanity(d.data.name) : \"\"\n    );\n\n    d3.select(\"#Test\").node().remove();\n\n    d3.selectAll(\".timeline-rect\").on(\"mouseover\", (e, d) => {\n      // d3.select(e.target).attr(\"stroke-width\", 8).attr(\"stroke\", \"var(--light-text)\");\n      d3.select(\"#tooltip\")\n        .transition()\n        .duration(200)\n        .style(\"opacity\", 1)\n        .text(\n          `'${fixProfanity(d.data.name)}' was altered in ${\n            d.data.count\n          } Kids Bop lyrics`\n        );\n    });\n  }, [hideProfanity]);\n\n  const toggleProfanity = () => {\n    console.log(\"here\");\n    setHideProfanity(!hideProfanity);\n  };\n\n  const shouldShowLabel = (d) => {\n    let fontSize = fontScale(d.data.count).toString() + \"pt\";\n    let textBox = d3\n      .select(\"#Test\")\n      .style(\"font-size\", fontSize)\n      .style(\"font-family\", \"Lato\")\n      .text(d.data.name)\n      .node()\n      .getBoundingClientRect();\n    let textWidth = textBox.width + 1;\n    let textHeight = textBox.height;\n\n    let boxHeight = d.y1 - d.y0;\n    let boxWidth = d.x1 - d.x0;\n    return textWidth <= boxWidth && textHeight <= boxHeight;\n  };\n\n  return (\n    <div className=\"page-container\">\n      <h1 className=\"title\">What's being altered in pop songs over time?</h1>\n      <div className=\"subtitle\">\n        Click on each year to see which lyrics by category were altered the most\n        that year.\n      </div>\n      <div id=\"timeline-wrapper\" className=\"timeline-container\">\n        <div className=\"timeline-svg-wrapper\">\n          <svg\n            className=\"d3-component\"\n            width=\"800px\"\n            height=\"500px\"\n            x=\"10%\"\n            ref={d3Container}\n            id=\"timeline\"\n          />\n        </div>\n        <div className=\"timeline-middle-column\">\n          {createLegend()}\n          <div className=\"profanity-container\">\n            <input\n              type=\"checkbox\"\n              checked={hideProfanity}\n              onChange={toggleProfanity}\n              id=\"profanity-toggle\"\n            ></input>\n            <label for=\"profanity-toggle\">Hide Curse Words</label>\n            <div className=\"timeline-profanity-ack\">\n              Profanity Filter provided by{\" \"}\n              <a\n                className=\"timeline-profanity-ack-link\"\n                href=\"https://github.com/KanoComputing/nodejs-profanity-util\"\n                target=\"_blank\"\n                rel=\"noreferrer\"\n              >\n                Kano Computing's NodeJS Profanity Filter\n              </a>\n            </div>\n          </div>\n        </div>\n        <YearScroller year={year} onChange={(newYear) => setYear(newYear)} />\n      </div>\n    </div>\n  );\n};\n\nexport default Timeline;\n","import { Carousel } from 'react-responsive-carousel';\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\";\nimport { Step1, Step2a, Step2b, Step2c, Step2d } from \"./StorySteps\";\n\nconst TutorialStep = () => {\n  return (\n    <div>\n      <Carousel dynamicHeight={false} showStatus={false} showThumbs={false}>\n        <Step1 />\n        <Step2a />\n        <Step2b />\n        <Step2c />\n        <Step2d />\n      </Carousel>\n    </div>\n  );\n}\n\nexport default TutorialStep;","import { useState } from \"react\";\nimport \"./App.css\";\nimport { Scrollama, Step } from 'react-scrollama'\nimport BubbleStep from \"./steps/BubbleStep\";\nimport { IntroStep } from './steps/StorySteps';\nimport Timeline from './Timeline';\nimport TutorialStep from \"./steps/TutorialStep\";\n\nexport const VIEW_ALL_OPTION = {\n  label: \"your favorite artist\",\n  value: \"all\",\n  type: \"all\",\n};\n\nconst App = () => {\n  const [currentStepIndex, setCurrentStepIndex] = useState(null);\n\n  const onStepEnter = ({ data }) => {\n    setCurrentStepIndex(data);\n  };\n\n  return (\n    <div className=\"App\" id=\"scrollApp\">\n      <Scrollama onStepEnter={onStepEnter}>\n        <Step\n          data={0}\n          key={0}\n          style={{\n            opacity: currentStepIndex === 0 ? 1 : 0.2,\n          }}\n        >\n          <div \n            className=\"App-step\"\n            style={{\n              height: \"100vh\",\n              display: \"flex\",\n              flexDirection: \"row\",\n            }}\n          >\n            <IntroStep />\n          </div>\n        </Step>\n        <Step data={1} key={1}>\n          <div  \n            className=\"App-step\"\n            style={{\n              padding: 0,\n              opacity: currentStepIndex === 1 ? 1 : 0.2,\n            }}\n          >\n            <Timeline />\n          </div>\n        </Step>\n        <Step data={3} key={3}>\n          <div\n            className=\"App-step\"\n            style={{\n              opacity: currentStepIndex === 3 ? 1 : 0.2,\n            }}\n          >\n            <TutorialStep />\n          </div>\n        </Step>\n        <Step data={4} key={4}>\n          <div\n            className=\"App-step\"\n            style={{\n              padding: 0,\n              opacity: currentStepIndex === 4 ? 1 : 0.2,\n            }}\n          >\n            <BubbleStep shouldFocus={currentStepIndex === 4} />\n          </div>\n        </Step>\n      </Scrollama>\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport \"./About.css\";\nimport { Carousel } from \"react-responsive-carousel\";\nimport { Link } from \"react-router-dom\";\n\nconst About = () => {\n  return (\n    <div className=\"About-page\">\n      <div className=\"About-container\">\n        <div className=\"About-carousel\">\n          <Carousel showStatus={false} showThumbs={false}>\n            <section id=\"carousel1\" className=\"About-section\">\n              <div>\n                <p className=\"About-title About-white-background\">Exploring Censorship and Lyric Alterations in Kidz Bopz Music from 2001-2019</p>\n                <p className=\"About-team About-white-background\">\n                  Nico Salinas, Shannen Wu {\"&\"} Jessica Yin\n                </p>\n              </div>\n              <Link to=\"/app\" className=\"launch-button\">\n                Launch Visualization App\n              </Link>\n\n              <p style={{marginTop: \"24px\"}}><i>Note: Use the left and right carousel arrows to navigate the project page. </i></p>\n            </section>\n            <section id=\"carousel2\" className=\"About-section About-section-white-background\">\n              <h2>Abstract</h2>\n              <p className=\"About-section-abstract\">Censorship and lyric alterations in music is observed in many public media channels such as the radio, TV, film among others. Often, it’s easy to identify certain profane words and find a replace the word in the lyric to produce a “Clean” or “Radio Edit” of a song. However, in the case study of Kidz Bop, a brand known for making songs as kid friendly as possible, we can visualize these trends to understand how music is altered for young audience, and in some cases, can change the context of a lyric or complete remove it. Our interactive data visualization tools process a hierarchical data transformation to create trends and associations among songs, artists, and altered words found in our music. </p>\n            </section>\n\n            <section id=\"carousel3\" className=\"About-section About-section-white-background\">\n              <h2>Project Trailer</h2>\n              <div class=\"video-container\">\n                <iframe width=\"560\" height=\"560\" src=\"https://www.youtube.com/embed/39xePSyzGp0\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n              </div>\n              <p>\n                Shannen Wu, Jessica Yin, and Nico Salinas  <br />\n                <i>(Guest performances from Matt Tung)</i>\n              </p>\n            </section>\n\n            <section id=\"carousel4\" className=\"About-section About-section-white-background\">\n              <h2>INSTALLATION DEMO INSTRUCTIONS</h2>\n              <div className=\"About-section-info\">\n                <h3>Dataset URL: <a className=\"About-section-info-link\" target=\"_blank\" href=\"https://github.com/the-pudding/data/tree/master/kidz-bop\" rel=\"noreferrer\">https://github.com/the-pudding/data/tree/master/kidz-bop</a></h3>\n                \n                <h3>Installation</h3>\n                <ol>\n                  <li>Locally clone the repository</li>\n                  <li>Run <code>npm install</code> to install all node dependices</li>\n                  <li>To test locally, run <code>npm start</code> and open a Chrome tab at <code>http://localhost:3000</code></li>\n                </ol>\n                \n                <h3>Deployment</h3>\n                The deployed site is managed by GitHub Pages. To deploy this repo:\n                <ol>\n                  <li>Run <code>npm run predeploy</code></li>\n                  <li>Run <code>npm run deploy</code></li>\n                  <li>Visit the deployed site at <a className=\"About-section-info-link\" target=\"_blank\" href=\"https://6859-sp21.github.io/final-project-adultz-bopz-fp/\" rel=\"noreferrer\">https://6859-sp21.github.io/final-project-adultz-bopz-fp/</a></li>\n                </ol>\n              </div>\n            </section>\n          </Carousel>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default About;\n","import React from \"react\";\nimport App from \"./App\";\nimport About from \"./About\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\n\nconst RouterWrapper = () => {\n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/app\">\n          <App />\n        </Route>\n        <Route path=\"/\">\n          <About />\n        </Route>\n      </Switch>\n    </Router>\n  );\n};\n\nexport default RouterWrapper;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport RouterWrapper from \"./RouterWrapper\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <RouterWrapper />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}